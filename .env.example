# =============================================================================
# COFORMA STUDIO - ENVIRONMENT VARIABLES
# =============================================================================
# Copy this file to .env.local and fill in the values
# Never commit .env.local to version control

# =============================================================================
# DATABASE
# =============================================================================

# PostgreSQL connection string (Railway managed)
# Format: postgresql://user:password@host:port/database?schema=public
DATABASE_URL="postgresql://postgres:password@localhost:5432/coforma_dev?schema=public"

# Database connection pool size
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# =============================================================================
# REDIS
# =============================================================================

# Redis connection string (Railway managed)
# Format: redis://user:password@host:port
REDIS_URL="redis://localhost:6379"

# Redis connection pool
REDIS_POOL_MIN=2
REDIS_POOL_MAX=10

# =============================================================================
# MEILISEARCH
# =============================================================================

# Meilisearch host and master key
MEILISEARCH_HOST="http://localhost:7700"
MEILISEARCH_MASTER_KEY=""

# =============================================================================
# AUTHENTICATION (NextAuth.js v5)
# =============================================================================

# NextAuth configuration
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="" # Generate with: openssl rand -base64 32

# OAuth Providers (optional - configure as needed)
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""

MICROSOFT_CLIENT_ID=""
MICROSOFT_CLIENT_SECRET=""

# Generic OIDC provider (for custom SSO)
OIDC_CLIENT_ID=""
OIDC_CLIENT_SECRET=""
OIDC_ISSUER=""

# =============================================================================
# API CONFIGURATION
# =============================================================================

# Backend API URL
NEXT_PUBLIC_API_URL="http://localhost:4000"

# tRPC endpoint
NEXT_PUBLIC_TRPC_URL="http://localhost:4000/trpc"

# API rate limiting
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# =============================================================================
# CLOUDFLARE (Storage & CDN)
# =============================================================================

# Cloudflare R2 (S3-compatible)
CLOUDFLARE_ACCOUNT_ID=""
CLOUDFLARE_ACCESS_KEY_ID=""
CLOUDFLARE_SECRET_ACCESS_KEY=""

# R2 Bucket names
R2_BUCKET_UPLOADS="coforma-uploads"
R2_BUCKET_EXPORTS="coforma-exports"
R2_BUCKET_PUBLIC="coforma-public"

# Cloudflare CDN
CLOUDFLARE_CDN_URL="https://cdn.coforma.studio"

# Cloudflare Turnstile (CAPTCHA alternative)
NEXT_PUBLIC_TURNSTILE_SITE_KEY=""
TURNSTILE_SECRET_KEY=""

# =============================================================================
# STRIPE (Payments & Billing)
# =============================================================================

# Stripe API keys (get from Stripe Dashboard)
STRIPE_SECRET_KEY=""  # sk_test_... or sk_live_...
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=""  # pk_test_... or pk_live_...

# Stripe webhook secret (for webhook signature verification)
STRIPE_WEBHOOK_SECRET=""  # whsec_...

# Stripe product/price IDs (configure after creating in Stripe Dashboard)
STRIPE_PRICE_ID_STARTER=""
STRIPE_PRICE_ID_PROFESSIONAL=""
STRIPE_PRICE_ID_ENTERPRISE=""

# =============================================================================
# EMAIL (Resend)
# =============================================================================

# Resend API key (get from https://resend.com/api-keys)
RESEND_API_KEY=""

# Sender email (must be verified in Resend)
EMAIL_FROM="Coforma Studio <noreply@coforma.studio>"

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================

# Zoom
ZOOM_CLIENT_ID=""
ZOOM_CLIENT_SECRET=""
ZOOM_WEBHOOK_SECRET=""

# Slack
SLACK_CLIENT_ID=""
SLACK_CLIENT_SECRET=""
SLACK_SIGNING_SECRET=""

# Google Calendar
GOOGLE_CALENDAR_CLIENT_ID=""
GOOGLE_CALENDAR_CLIENT_SECRET=""

# Jira
JIRA_CLIENT_ID=""
JIRA_CLIENT_SECRET=""
JIRA_WEBHOOK_SECRET=""

# Asana
ASANA_CLIENT_ID=""
ASANA_CLIENT_SECRET=""

# ClickUp
CLICKUP_CLIENT_ID=""
CLICKUP_CLIENT_SECRET=""

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Sentry (Error Tracking)
NEXT_PUBLIC_SENTRY_DSN=""
SENTRY_AUTH_TOKEN=""
SENTRY_ORG=""
SENTRY_PROJECT=""

# Better Stack / Logtail (Logging)
LOGTAIL_SOURCE_TOKEN=""

# PostHog (Product Analytics)
NEXT_PUBLIC_POSTHOG_KEY=""
NEXT_PUBLIC_POSTHOG_HOST="https://app.posthog.com"

# =============================================================================
# SECURITY
# =============================================================================

# Encryption key for sensitive data (generate with: openssl rand -hex 32)
ENCRYPTION_KEY=""

# CORS allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS="http://localhost:3000,https://coforma.studio,https://*.coforma.studio"

# Content Security Policy nonce (auto-generated if not set)
CSP_NONCE=""

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable features per environment
FEATURE_FLAG_GOOGLE_CALENDAR=true
FEATURE_FLAG_ZOOM_INTEGRATION=true
FEATURE_FLAG_JIRA_SYNC=false
FEATURE_FLAG_ASANA_SYNC=false
FEATURE_FLAG_CLICKUP_SYNC=false
FEATURE_FLAG_WHITE_LABEL=false
FEATURE_FLAG_SSO_SAML=false

# =============================================================================
# ENVIRONMENT
# =============================================================================

# Environment name (development, staging, production)
NODE_ENV="development"
NEXT_PUBLIC_ENV="development"

# Application URL (for email links, etc.)
APP_URL="http://localhost:3000"

# =============================================================================
# DEVELOPMENT ONLY
# =============================================================================

# Prisma Studio (database GUI)
# Access at: http://localhost:5555
# Run with: pnpm db:studio

# Seed database on startup (development only)
SEED_DATABASE=false

# Debug logging
DEBUG=false
LOG_LEVEL="info"  # error, warn, info, debug, trace
